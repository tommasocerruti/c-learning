#include <stdlib.h>
#include <stdio.h>

#define RECURSIVE 1
#define ITERATION 0

int binarysearchr(int*, int, int, int);
int binarysearchi(int*, int, int, int);

int main(void){
    int *arr, n, val, i;
    fprintf(stdout,"How many values?");
    fscanf(stdin,"%d",&n);
    arr=malloc(n*sizeof(int));
    if (arr==NULL)
        exit(1);
    fprintf(stdout,"Input the values\n");
    for (i=0;i<n;i++)
        fscanf(stdin,"%d",&arr[i]);
    fprintf(stdout,"What value do you look for?");
    fscanf(stdin,"%d",&val);
#if (RECURSIVE)
    i=binarysearchi(arr, 0, n-1, val);
#endif
#if (ITERATION)
    i=binarysearchi(arr, 0, n-1, val);
#endif
    return i;
}

int binarysearchr(int* arr, int l, int r, int val){
    int c=(r+l)/2;
    if (l>r)
        return -1;
    else if (arr[c]>val)
        return binarysearchr(arr, 0, c-1, val);
    else if (arr[c]<val)
        return binarysearchr(arr, c+1, r, val);
    return c;
}

int binarysearchi(int* arr, int l, int r, int val){
    int c;
    while (l<r){
        c=(l+r)/2;
        if (arr[c]==val)
            return c;
        else if (arr[c]>val)
            r-=c-1;
        else if (arr[c]<val)
            l+=c+1;

    }
    return -1;
}